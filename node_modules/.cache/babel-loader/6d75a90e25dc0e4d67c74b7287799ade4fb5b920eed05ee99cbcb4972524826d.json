{"ast":null,"code":"import axios from'axios';const hosting=\"https://render-express-iqei.onrender.com\";export const postInDb=async _ref=>{let{formData,setRerender,setUpload}=_ref;const passKey=\"Neonflake\";const cloud=\"CloudinaryReshwanth\";const videoUpload=new FormData();videoUpload.append(\"upload_preset\",passKey);if(formData.videoFile){videoUpload.append(\"file\",formData.videoFile);}else{console.error(\"videoFile is missing in formData\");return;}const imageUpload=new FormData();imageUpload.append(\"upload_preset\",passKey);if(formData.imageFile){imageUpload.append(\"file\",formData.imageFile);}else{console.error(\"imageFile is missing in formData\");return;}try{const videoResponse=await axios.post(\"https://api.cloudinary.com/v1_1/\".concat(cloud,\"/video/upload\"),videoUpload);console.log(\"Video upload success:\",videoResponse.data);const imageResponse=await axios.post(\"https://api.cloudinary.com/v1_1/\".concat(cloud,\"/image/upload\"),imageUpload);console.log(\"Image upload success:\",imageResponse.data);const postData={title:formData.title,description:formData.description,imageFile:{imageName:imageResponse.data.original_filename,imageUrl:imageResponse.data.secure_url},videoFile:{videoName:videoResponse.data.original_filename,videoUrl:videoResponse.data.secure_url}};const dbResponse=await axios.post(\"\".concat(hosting,\"/api/post\"),postData);setRerender(render=>!render);setUpload(\"not uploaded\");console.log(\"Data posted to DB:\",dbResponse.data);}catch(error){console.error(\"Error during processing:\",error);}};export const getInDb=async()=>{try{const response=await axios.get(\"\".concat(hosting,\"/api/get\"));return response.data;}catch(error){console.error(\"Error fetching data:\",error);throw new Error(error.message);}};","map":{"version":3,"names":["axios","hosting","postInDb","_ref","formData","setRerender","setUpload","passKey","cloud","videoUpload","FormData","append","videoFile","console","error","imageUpload","imageFile","videoResponse","post","concat","log","data","imageResponse","postData","title","description","imageName","original_filename","imageUrl","secure_url","videoName","videoUrl","dbResponse","render","getInDb","response","get","Error","message"],"sources":["/home/reshwanth/Office work/neonflask/frontend/src/Api.js"],"sourcesContent":["import axios from 'axios';\n\nconst hosting = \"https://render-express-iqei.onrender.com\";\n\nexport const postInDb = async ({ formData, setRerender, setUpload }) => {\n  const passKey = \"Neonflake\";\n  const cloud = \"CloudinaryReshwanth\";\n\n  const videoUpload = new FormData();\n  videoUpload.append(\"upload_preset\", passKey);\n  if (formData.videoFile) {\n    videoUpload.append(\"file\", formData.videoFile);\n  } else {\n    console.error(\"videoFile is missing in formData\");\n    return;\n  }\n\n  const imageUpload = new FormData();\n  imageUpload.append(\"upload_preset\", passKey);\n  if (formData.imageFile) {\n    imageUpload.append(\"file\", formData.imageFile);\n  } else {\n    console.error(\"imageFile is missing in formData\");\n    return;\n  }\n\n  try {\n    const videoResponse = await axios.post(`https://api.cloudinary.com/v1_1/${cloud}/video/upload`, videoUpload);\n    console.log(\"Video upload success:\", videoResponse.data);\n\n    const imageResponse = await axios.post(`https://api.cloudinary.com/v1_1/${cloud}/image/upload`, imageUpload);\n    console.log(\"Image upload success:\", imageResponse.data);\n\n    const postData = {\n      title: formData.title,\n      description: formData.description,\n      imageFile: {\n        imageName: imageResponse.data.original_filename,\n        imageUrl: imageResponse.data.secure_url\n      },\n      videoFile: {\n        videoName: videoResponse.data.original_filename,\n        videoUrl: videoResponse.data.secure_url\n      }\n    };\n\n    const dbResponse = await axios.post(`${hosting}/api/post`, postData);\n    setRerender(render => !render);\n    setUpload(\"not uploaded\");\n    console.log(\"Data posted to DB:\", dbResponse.data);\n  } catch (error) {\n    console.error(\"Error during processing:\", error);\n  }\n};\n\nexport const getInDb = async () => {\n  try {\n    const response = await axios.get(`${hosting}/api/get`);\n    return response.data; \n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n    throw new Error(error.message);\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}